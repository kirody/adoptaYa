<div class="">
  <app-header-page [title]="animal()?.name || 'Detalle del Animal'" [icon]="icon"></app-header-page>

  <div class="card flex justify-center" *ngIf="isLoading()">
    <p-progress-spinner strokeWidth="4" fill="transparent" animationDuration=".0.5s" [style]="{ width: '50px', height: '50px' }" />
  </div>

  <div *ngIf="!isLoading() && animal() as currentAnimal" class="animal-detail-container flex mt-4">
    <div class="col-12 md:col-6 flex justify-center items-start p-4">
      <div class="image-container relative rounded-lg overflow-hidden shadow-md">
        <img class="animal-image" [src]="currentAnimal.urlImage" [alt]="currentAnimal.name" />
        <p-tag [value]="formattedStates(currentAnimal)" [severity]="getStatus(currentAnimal)"
          class="status-tag absolute" />
      </div>
    </div>
    <div class="col-12 md:col-6">
      <div class="p-4">
        <div class="mt-2">
          <h3 class="font-semibold text-xl mb-2">
            Detalles
            <i [class]="`fa-solid ${icon} mr-2`"></i>
            <i [class]="`fa-solid ${gender} mr-2`"></i>
          </h3>
          <ul class="list-none p-0 m-0">
            <li class="flex items-center py-2 border-b border-surface-200 dark:border-surface-700">
              <span class="font-semibold w-1/3">Edad:</span>
              <span>{{ currentAnimal.age }} años</span>
            </li>
            <li class="flex items-center py-2 border-b border-surface-200 dark:border-surface-700">
              <span class="font-semibold w-1/3">Raza:</span>
              <span>{{ currentAnimal.race }}</span>
            </li>
            <li class="flex items-center py-2 border-b border-surface-200 dark:border-surface-700">
              <span class="font-semibold w-1/3">Provincia:</span>
              <span>{{ currentAnimal.province }}</span>
            </li>
            <li class="flex items-center py-2 border-b border-surface-200 dark:border-surface-700">
              <span class="font-semibold w-1/3">Tamaño:</span>
              <span>{{ currentAnimal.size }}</span>
            </li>
          </ul>
        </div>

        <div class="mt-6">
          <h3 class="font-semibold text-xl mb-2">Sobre {{currentAnimal.name}}</h3>
          <p class="text-surface-700 dark:text-surface-300 leading-relaxed">
            {{ currentAnimal.description }}
          </p>
        </div>

        <div class="mt-8 flex gap-2">
          <button pButton label="¡Adoptar ahora!" icon="pi pi-heart" class="w-full md:w-auto"></button>
          <button pButton label="Volver" icon="pi pi-arrow-left" [outlined]="true" (click)="goBack()"
            class="w-full md:w-auto"></button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!isLoading() && !animal()" class="text-center p-6">
    <p class="text-xl text-surface-500">No se pudo encontrar el animal.</p>
    <button pButton label="Volver al listado" icon="pi pi-arrow-left" (click)="goBack()" class="mt-4"></button>
  </div>
</div>
